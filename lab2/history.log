7e952de2-a2f8-49fc-a6fb-e51fbe351758:1739434794227:221:S:DROP TABLE STUDENTS;
f8f75530-cd0b-4136-85a1-5f22181d4ff4:1739434794497:17:S:DROP TABLE GROUPS;
ea603a85-50f0-48a3-b6bc-f387a80b9dee:1739434795535:13:S:CREATE TABLE GROUPS (\nID NUMBER,\nNAME VARCHAR2(100),\nC_VAL NUMBER\n);
8dcf3046-db56-4304-972b-8630a6662598:1739434795742:5:S:CREATE TABLE STUDENTS (\nID NUMBER,\nNAME VARCHAR2(100),\nGROUP_ID NUMBER\n);
5bce09e3-442e-4ed8-aec0-b66bedb00f94:1739436077246:0:F:CREATE SEQUENCE groups_seq START WITH 1 INCREMENT BY 1;
0457a206-177f-4b6f-9700-23bee1c7421c:1739436077331:0:F:CREATE SEQUENCE students_seq START WITH 1 INCREMENT BY 1;
3a91f9a3-aa92-4b7c-86ce-b6c5a760f5bc:1739436138160:66:S:CREATE OR REPLACE TRIGGER task2_groups_trigger\nBEFORE INSERT ON GROUPS\nFOR EACH ROW\nBEGIN\n    -- Генерация ID если не указан\n    IF :NEW.ID IS NULL THEN\n        :NEW.ID := groups_seq.NEXTVAL;\n    END IF;\n    \n    -- Проверка уникальности ID\n    DECLARE\n        v_count NUMBER;\n    BEGIN\n        SELECT COUNT(*) INTO v_count\n        FROM GROUPS\n        WHERE ID = :NEW.ID;\n        \n        IF v_count > 0 THEN\n            RAISE_APPLICATION_ERROR(-20001, 'Duplicate GROUP ID: ' || :NEW.ID);\n        END IF;\n    END;\n    \n    -- Проверка уникальности NAME\n    DECLARE\n        v_count NUMBER;\n    BEGIN\n        SELECT COUNT(*) INTO v_count\n        FROM GROUPS\n        WHERE NAME = :NEW.NAME;\n        \n        IF v_count > 0 THEN\n            RAISE_APPLICATION_ERROR(-20002, 'Duplicate GROUP NAME: ' || :NEW.NAME);\n        END IF;\n    END;\nEND;\n/
6aac7585-20bb-4828-8257-aad58318515c:1739436139337:14:S:CREATE OR REPLACE TRIGGER task2_students_trigger\nBEFORE INSERT ON STUDENTS\nFOR EACH ROW\nBEGIN\n    -- Генерация ID если не указан\n    IF :NEW.ID IS NULL THEN\n        :NEW.ID := students_seq.NEXTVAL;\n    END IF;\n    \n    -- Проверка уникальности ID\n    DECLARE\n        v_count NUMBER;\n    BEGIN\n        SELECT COUNT(*) INTO v_count\n        FROM STUDENTS\n        WHERE ID = :NEW.ID;\n        \n        IF v_count > 0 THEN\n            RAISE_APPLICATION_ERROR(-20003, 'Duplicate STUDENT ID: ' || :NEW.ID);\n        END IF;\n    END;\nEND;\n/
d952077f-e8bd-4a60-91e9-4b4dac0ac6c1:1739436262177:14:S:INSERT INTO GROUPS (NAME) VALUES ('Group A');
63d7a716-6194-48e6-91cc-9c84c127681c:1739436262237:1:S:INSERT INTO GROUPS (NAME) VALUES ('Group B');
0ee61e67-2883-4775-b88c-29c189717bd6:1739436262349:3:S:INSERT INTO GROUPS (ID, NAME) VALUES (1, 'Group C');  -- Должна вызвать ошибку
4d408612-b34e-4ea6-9ae9-89b5fa854242:1739436262461:0:F:INSERT INTO GROUPS (NAME) VALUES ('Group A');  -- Должна вызвать ошибку
7851f8ac-6d54-4e60-b6ec-a4f705236c1e:1739436262666:5:S:INSERT INTO STUDENTS (NAME, GROUP_ID) VALUES ('John Doe', 1);
d7242dbc-f99b-48cd-abe4-a2e61b7eb6a6:1739436262725:2:S:INSERT INTO STUDENTS (NAME, GROUP_ID) VALUES ('Jane Smith', 1);
7071f12b-7058-4a48-879d-d287e4ed1174:1739436262847:3:S:INSERT INTO STUDENTS (ID, NAME, GROUP_ID) VALUES (1, 'Bob Wilson', 2);  -- Должна вызвать ошибку
be1ec73f-ef50-4764-8143-cb3cb50fe10d:1739436262936:50:S:SELECT * FROM GROUPS;
c9ec3e45-6535-4abe-8976-1de94bdf29fe:1739436263024:8:S:SELECT * FROM STUDENTS;
9f2789de-5a5c-48a4-9fc3-2e7ce6c4320e:1739436388000:0:F:INSERT INTO GROUPS (NAME) VALUES ('Group A');
ea570271-6027-4d80-a169-7cebf61be58d:1739436388050:0:F:INSERT INTO GROUPS (NAME) VALUES ('Group B');
ca4644d0-4f17-41a5-ac26-75d4862497f8:1739436388244:0:F:INSERT INTO GROUPS (ID, NAME) VALUES (1, 'Group C');  -- Должна вызвать ошибку
6525f489-2472-4546-858c-e4f19535788e:1739436388383:0:F:INSERT INTO GROUPS (NAME) VALUES ('Group A');  -- Должна вызвать ошибку
1140b5e5-c44a-4c85-b67d-53f1be6ae99a:1739436388498:1:S:INSERT INTO STUDENTS (NAME, GROUP_ID) VALUES ('John Doe', 1);
6963c792-e27a-49c3-bdd0-a6a40dbc2a72:1739436388548:1:S:INSERT INTO STUDENTS (NAME, GROUP_ID) VALUES ('Jane Smith', 1);
55046852-7401-4306-8407-69365a4c5ca6:1739436388672:0:F:INSERT INTO STUDENTS (ID, NAME, GROUP_ID) VALUES (1, 'Bob Wilson', 2);  -- Должна вызвать ошибку
d055a92d-5b92-41ac-8251-8d636824ed8a:1739436388795:4:S:SELECT * FROM GROUPS;
9d912ef9-7d34-47e7-b52c-8c5bce7080e3:1739436388835:3:S:SELECT * FROM STUDENTS;
a6791507-07d1-4cf1-9a44-e67e24535568:1739436470707:4:S:DELETE FROM STUDENTS;
3042ea94-9065-4e14-8d67-6684b7df43eb:1739436470749:2:S:DELETE FROM GROUPS;
705910c3-73d5-4dd6-8e9e-d5e7c3ad931a:1739436470823:1:S:INSERT INTO GROUPS (NAME) VALUES ('Group A');
5753add5-b7fe-4383-a923-9aeaba3b791e:1739436470869:1:S:INSERT INTO GROUPS (NAME) VALUES ('Group B');
e005f4c0-c640-4575-9486-98e9d6c04dce:1739436470989:1:S:INSERT INTO GROUPS (ID, NAME) VALUES (1, 'Group C');  -- Должна вызвать ошибку
2ae0b6c0-461a-47bb-ac16-72c3faa442b4:1739436471099:0:F:INSERT INTO GROUPS (NAME) VALUES ('Group A');  -- Должна вызвать ошибку
3c848fe5-4d41-4256-a5dc-b3a76fc50e06:1739436471215:1:S:INSERT INTO STUDENTS (NAME, GROUP_ID) VALUES ('John Doe', 1);
439f3373-57db-4e55-9793-b5df5fcc0478:1739436471269:2:S:INSERT INTO STUDENTS (NAME, GROUP_ID) VALUES ('Jane Smith', 1);
d542d8ca-b5cf-407e-91f9-3af1a1d74e4c:1739436471394:2:S:INSERT INTO STUDENTS (ID, NAME, GROUP_ID) VALUES (1, 'Bob Wilson', 2);  -- Должна вызвать ошибку
b700f628-172c-483e-bf9b-51048045719b:1739436471480:3:S:SELECT * FROM GROUPS;
e2b1fc05-46fd-4e1a-a5a2-5e7828b7d5e5:1739436471519:4:S:SELECT * FROM STUDENTS;
521d2dbe-cbbe-4610-9eb4-d8cd58bfbfc4:1739436508241:2:S:DELETE FROM STUDENTS;
e91b780e-016b-47cc-8f37-5e62538a2aee:1739436508276:3:S:DELETE FROM GROUPS;
b37e0658-214d-44c4-8acf-351f471192fe:1739436508334:16:S:DROP SEQUENCE students_seq;
669c45c8-8d53-44da-9f75-e70be05eae75:1739436508381:4:S:DROP SEQUENCE groups_seq;
91128473-da67-42fa-93f7-5b8ce7d7fbcd:1739436508438:5:S:CREATE SEQUENCE students_seq START WITH 1 INCREMENT BY 1;
b21163ed-a37b-4017-90de-7a54045adccc:1739436508499:2:S:CREATE SEQUENCE groups_seq START WITH 1 INCREMENT BY 1;
1887ffa8-0501-4146-8dc0-83f51477de81:1739436508602:32:S:INSERT INTO GROUPS (NAME) VALUES ('Group A');
1ab08863-f70d-4735-97b3-70bf3c59f6fe:1739436508676:3:S:INSERT INTO GROUPS (NAME) VALUES ('Group B');
e8d10f64-d7c8-4053-ac1f-0a1b2fdf39b9:1739436508782:0:F:INSERT INTO GROUPS (ID, NAME) VALUES (1, 'Group C');  -- Должна вызвать ошибку
ca06b191-dd94-496d-918e-abe372f60d3a:1739436508964:0:F:INSERT INTO GROUPS (NAME) VALUES ('Group A');  -- Должна вызвать ошибку
0ad4fac2-a8b3-40a9-97a8-d540387ee4c7:1739436509090:13:S:INSERT INTO STUDENTS (NAME, GROUP_ID) VALUES ('John Doe', 1);
bbdeb08c-606a-48c4-acd0-b88c29cb5b92:1739436509149:2:S:INSERT INTO STUDENTS (NAME, GROUP_ID) VALUES ('Jane Smith', 1);
17aeebec-4ce5-4e8c-9f6e-030bd87e9334:1739436509277:0:F:INSERT INTO STUDENTS (ID, NAME, GROUP_ID) VALUES (1, 'Bob Wilson', 2);  -- Должна вызвать ошибку
17a4eb33-8026-4462-993c-8454660b7260:1739436509375:4:S:SELECT * FROM GROUPS;
db3407b5-23d4-4c70-bd99-2207dcee083c:1739436509412:3:S:SELECT * FROM STUDENTS;
16eb98e7-dab4-4c3f-b5b2-717ac41e1b68:1739442038393:86:S:CREATE OR REPLACE TRIGGER students_fk_check\nBEFORE INSERT OR UPDATE OF GROUP_ID ON STUDENTS\nFOR EACH ROW\nWHEN (NEW.GROUP_ID IS NOT NULL)\nDECLARE\n    v_count NUMBER;\nBEGIN\n    SELECT COUNT(*)\n    INTO v_count\n    FROM GROUPS\n    WHERE ID = :NEW.GROUP_ID;\n    \n    IF v_count = 0 THEN\n        RAISE_APPLICATION_ERROR(-20004, 'Referenced group with ID ' || :NEW.GROUP_ID || ' does not exist');\n    END IF;\nEND;\n/
404b8420-7982-499d-a995-c6938e0a9b75:1739442038961:27:S:CREATE OR REPLACE TRIGGER groups_cascade_delete\nBEFORE DELETE ON GROUPS\nFOR EACH ROW\nBEGIN\n    DELETE FROM STUDENTS\n    WHERE GROUP_ID = :OLD.ID;\nEND;\n/
e9192470-5a37-4c8c-a75b-d743d4b3ed1d:1739442136037:12:S:DELETE FROM STUDENTS;
df4e96d2-5b03-4b31-a7f9-9227187b934b:1739442136121:33:S:DELETE FROM GROUPS;
de3cd52a-5490-4f15-8bc6-eb9457d256ed:1739442136233:14:S:DROP SEQUENCE students_seq;
c6355cbb-6a54-483c-b1d8-076ae1617409:1739442136323:8:S:DROP SEQUENCE groups_seq;
91a7531c-8106-49e2-914b-111d11f8ab6f:1739442136442:6:S:CREATE SEQUENCE students_seq START WITH 1 INCREMENT BY 1;
9dca99cb-324c-4aca-9a08-16f50ec09aa9:1739442136566:5:S:CREATE SEQUENCE groups_seq START WITH 1 INCREMENT BY 1;
cb44d200-3187-41ec-b368-cba41b5dd481:1739442136807:28:S:INSERT INTO GROUPS (NAME) VALUES ('Group A');
4cd1e6f1-2893-4b66-beb4-ee3fdd761e3a:1739442136922:4:S:INSERT INTO GROUPS (NAME) VALUES ('Group B');
e62ca9c4-a7d2-49b5-9c86-58fc5bca56d4:1739442137139:42:S:INSERT INTO STUDENTS (NAME, GROUP_ID) VALUES ('John Doe', 1);
134ff335-58c0-4ea8-a526-d1e5c5de5717:1739442137335:4:S:INSERT INTO STUDENTS (NAME, GROUP_ID) VALUES ('Jane Smith', 1);
4c5fd03d-2747-4e30-b45f-cf132155bd73:1739442137441:5:S:INSERT INTO STUDENTS (NAME, GROUP_ID) VALUES ('Bob Wilson', 2);
eb6f5da7-697e-46a8-9473-37d0479feaf0:1739442137731:0:F:INSERT INTO STUDENTS (NAME, GROUP_ID) VALUES ('Error Student', 999);
8d7b8a83-f0ce-4559-8dc6-92afbebcfab5:1739442138464:22:S:SELECT 'Before delete' as status, g.ID as group_id, g.NAME as group_name, \n       s.ID as student_id, s.NAME as student_name\nFROM GROUPS g\nLEFT JOIN STUDENTS s ON g.ID = s.GROUP_ID\nORDER BY g.ID, s.ID;
8658dcfa-3a0c-409d-9eab-ded3b4c6ef76:1739442138691:10:S:DELETE FROM GROUPS WHERE ID = 1;
accbcf8d-a894-443e-8ffb-af3868e69ba6:1739442139113:13:S:SELECT 'After delete' as status, g.ID as group_id, g.NAME as group_name, \n       s.ID as student_id, s.NAME as student_name\nFROM GROUPS g\nLEFT JOIN STUDENTS s ON g.ID = s.GROUP_ID\nORDER BY g.ID, s.ID;
